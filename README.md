# Работа с вакансиями на Head Hunter

## Цель проекта: 
Проект предназначен для выгрузки и фильтрации вакансий с hh.ru:
+ Отфильтровать вакансии по ключевым словам
+ Отфильтровать вакансии по зарплате (по указанному диапазону)
+ Отсортировать вакансии по убыванию зарплаты
+ Выгрузить топ вакансий по зарплате


## Установка:
1. Клонируйте репозиторий:
```https://github.com/Natalia-Epifanova/Vacancies```
2. Установите зависимости:
```pip install -r requirements.txt```


## Требования к проекту
- Python 3.11
- black 24.10.0
- flake8 7.1.1
- isort 5.13.2
- mypy 1.13.0
- pytest = 8.3.4
- pytest-cov = 6.0.0
- python-dotenv = 1.0.1

## Реализованные классы и функции:
1. Модуль ```api_request```:
 -  ```class APIRequest``` - абстрактный класс для получения информации о вакансиях по API
2. Модуль ```head_hunter_api```:
 -  ```class HeadHunterAPI``` - класс для запроса вакансий по API с Head Hunter, наследуется от абстрактного ```class APIRequest```
 - атрибуты класса: url: str, headers: dict, params: dict, vacancies: list
 - методы класса: ```__init__(self)``` - для инициализации класса; 
```_APIRequest__api_connect(self)``` - для отправки запроса по API, на выходе ответ или None; 
```get_vacancies(self, keyword: str)``` - для получения вакансий с HH по API, на выходе измененный атрибут vacancies
3. Модуль ```vacancy```:
- ```class Vacancy``` - класс для работы с вакансиями
- атрибуты класса: vacancy_name: str, vacancy_url: str, salary: str, description: str
- методы класса: ```__init__(self)``` - для инициализации класса; 
```__validate(self)``` - для валидации данных (проверка типов входных параметров); 
```__lt__(self, other: object)``` - магический метод для сравнения вакансий по зарплате/меньше;
```__gt__(self, other: object)``` - магический метод для сравнения вакансий по зарплате/больше;
4. Модуль ```work_with_files```:
 -  ```class WorkWithFiles``` - абстрактный класс для работы с файлами.
5. Модуль ```json_saver```:
- ```class JSONSaver``` - класс для работы с JSON файлами
- атрибуты класса: vacancies_list: list, filename: str
 - методы класса: ```__init__(self)``` - для инициализации класса; 
```__vacancies_in_list(self)``` - приватный метод для получения вакансий в виде списка в нужном формате; 
```add_vacancy(self, vacancy: Vacancy)``` - для добавления вакансии в файл, на входе - объект класса Vacancy;
```read_data(self)```  - для чтения данных из файла; геттер и сеттер для filename
6. Модуль ```json_filter```:
- ```class JSONFilter``` - класс для работы с JSON файлами
- атрибуты класса: vacancies_list: list
 - методы класса: ```__init__(self)``` - для инициализации класса; 
```__str__(self)``` - магический метод для отображения отфильтрованных вакансий для пользователей;
```filter_vacancies(self, list_of_keywords: list)``` - для фильтрации вакансий по ключевым словам, на входе - список ключевых слов, на выходе отфильтрованные вакансии; 
```get_vacancies_by_salary(self, min_salary: float, max_salary: float)``` - для фильтрации вакансий по диапазону зарплат, на входе - мин и макс значения диапазона, на выходе отфильтрованные вакансии;
```sort_vacancies(self)```  - для сортировки вакансий по минимальной зарплате по убыванию, на выходе отсортированные вакансии;
```get_top_vacancies(self, top_number: int)```  - для получения топ N вакансий, на вход - кол-во топ вакансий, на выходе топ N вакансий
7. Модуль ```utils``` - вспомогательные функции:
- ```type_of_salary(vacancy: dict)``` - функция, преобразующая зарплату в нужный вид. На входе - словарь с описанием вакансии, на выходе строка с зарплатой/диапазоном зарплат
- ```type_of_description(vacancy: dict)``` - функция, преобразующая описание в нужный вид. На входе - словарь с описанием вакансии, на выходе строка с требованиями и обязанностями
- ```get_min_salary(salary_str: str)``` - функция извлекает минимальную зарплату из строки. На входе строка с зарплатой/диапазоном зарплат - на выходе строка с минимальной зарплатой
- ```dict_to_vac(vacancy_dict: dict)``` - функция для преобразования словаря в объект класс Vacancy
- ```vac_to_dict(vac: Vacancy)``` - функция для преобразования объекта класса Vacancy в словарь

## Тестирование
Чтобы проверить процент покрытия кода тестами - необходимо:
- Ввести в терминале команду ```cd tests```
- Ввести в терминале команду ```poetry run pytest --cov-report term-missing --cov=src```
#### Благодаря тестам была осуществлена проверка всех функций на корректность работы. Было проверено:
- соответствие входных данных ожидаемым
- получение ожидаемого результата
- корректность работы функции при нестандартных входных данных (а именно выброс ошибок)
